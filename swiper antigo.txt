document.addEventListener("DOMContentLoaded", function () {
  const containerSelector = ".planos-b2b-swiper";

  function initOne(container) {
    // destruir instância anterior se existir
    if (container.__swiperInstance) {
      container.__swiperInstance.destroy(true, true);
      container.__swiperInstance = null;
    }

    const swiper = new Swiper(container, {
      loop: true,
      watchOverflow: true, // remove bullets se não houver slides suficientes
      autoplay: {
        delay: 5000,
        disableOnInteraction: false,
        pauseOnMouseEnter: true
      },
      spaceBetween: 20,
      slidesPerView: 1,
      slidesPerGroup: 1,

      // Bullets padrão
      pagination: {
        el: container.querySelector(".swiper-pagination"),
        clickable: true
      },

      // breakpoints sem offset
      breakpoints: {
        576:  { slidesPerView: 2, slidesPerGroup: 2, spaceBetween: 20 },
        768:  { slidesPerView: 2, slidesPerGroup: 2, spaceBetween: 20 },
        1024: { slidesPerView: 3, slidesPerGroup: 3, spaceBetween: 20 },
        1200: { slidesPerView: 4, slidesPerGroup: 4, spaceBetween: 20 }
      }
    });

    container.__swiperInstance = swiper;
  }

  const containers = document.querySelectorAll(containerSelector);
  containers.forEach(initOne);

  // reinit no resize/orientation
  window.addEventListener("resize", () => containers.forEach(initOne));
  window.addEventListener("orientationchange", () => containers.forEach(initOne));
});
